<!-- meetings/templates/meetings/partials/role_row.html -->
<tr id="role-row-{{ assignment.id }}">
    <!-- Column 1: Role Name -->
    <td class="fw-bold align-middle">{{ assignment.role.name }}</td>
    
    <!-- Column 2: Member / Button -->
    <td class="align-middle">
        {% if assignment.user %}
            {% if assignment.user == user %}
                <!-- It's ME -->
                <span class="text-success fw-bold me-2">You</span>

                <!-- NEW: Show my status if I am a guest
                {% if user.is_guest %}
                    <span class="badge rounded-pill bg-info text-dark me-2">Guest</span>
                {% endif %} -->
                <!-- Or, distinguish "Member" vs "Officer" vs "Guest" -->
                {% if assignment.user.is_guest %}
                    <span class="badge bg-info text-dark ms-1">Guest</span>
                {% elif assignment.user.is_officer %}
                    <span class="badge bg-warning text-dark ms-1">Officer</span>
                {% else %}
                    <span class="badge bg-light text-dark border ms-1">Member</span>
                {% endif %}
                <button class="btn btn-sm btn-outline-danger"
                        hx-post="{% url 'toggle_role' assignment.id %}"
                        hx-target="#role-row-{{ assignment.id }}"
                        hx-swap="outerHTML">
                    Drop Role
                </button>
            {% else %}
                <!-- It's someone else -->
                {{ assignment.user.first_name }} {{ assignment.user.last_name }}

                <!-- NEW: Show Guest Badge for others
                {% if assignment.user.is_guest %}
                    <span class="badge rounded-pill bg-info text-dark ms-1">Guest</span>
                {% endif %} -->
                <!-- Or, distinguish "Member" vs "Officer" vs "Guest" -->
                {% if assignment.user.is_guest %}
                    <span class="badge bg-info text-dark ms-1">Guest</span>
                {% elif assignment.user.is_officer %}
                    <span class="badge bg-warning text-dark ms-1">Officer</span>
                {% else %}
                    <span class="badge bg-light text-dark border ms-1">Member</span>
                {% endif %}
            {% endif %}
        {% else %}
            <!-- It's Open: Show Sign Up Button -->
            {% if user.is_authenticated %}
                <button class="btn btn-sm btn-primary"
                        hx-post="{% url 'toggle_role' assignment.id %}"
                        hx-target="#role-row-{{ assignment.id }}"
                        hx-swap="outerHTML">
                    Sign Up
                </button>
            {% else %}
                <span class="text-muted fst-italic">-- Open --</span>
            {% endif %}
        {% endif %}
    </td>

    <!-- Column 3: Status Badge -->
    <td class="align-middle">
        {% if assignment.user %}
            <span class="badge bg-success">Filled</span>
        {% else %}
            <span class="badge bg-warning text-dark">Needed</span>
        {% endif %}
    </td>
</tr>
